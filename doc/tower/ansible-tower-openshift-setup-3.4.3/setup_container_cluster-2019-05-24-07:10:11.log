[0;34mNo config file found; using defaults[0m

PLAY [Deploy Tower] ********************************************************************************************************************

TASK [preflight : include_tasks] *******************************************************************************************************
[0;36mincluded: /Users/jlbuenosvinos/OneDrive/RedHat/Doc/OpenShift/GIT/ocp-microservices-ddd/doc/tower/ansible-tower-openshift-setup-3.4.3/roles/preflight/tasks/check_openshift.yml for localhost[0m

TASK [preflight : openshift_project should be defined] *********************************************************************************
[0;32mok: [localhost] => {[0m
[0;32m    "changed": false, [0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [preflight : openshift_user should be defined] ************************************************************************************
[0;32mok: [localhost] => {[0m
[0;32m    "changed": false, [0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [preflight : openshift_password should be defined] ********************************************************************************
[0;32mok: [localhost] => {[0m
[0;32m    "changed": false, [0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [preflight : Check if the oc command is installed] ********************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "type oc", "delta": "0:00:00.007753", "end": "2019-05-24 07:10:14.257122", "rc": 0, "start": "2019-05-24 07:10:14.249369", "stderr": "", "stderr_lines": [], "stdout": "oc is /Applications/RedHat/oc", "stdout_lines": ["oc is /Applications/RedHat/oc"]}[0m

TASK [preflight : Ensure OpenShift CLI is installed] ***********************************************************************************
[0;32mok: [localhost] => {[0m
[0;32m    "changed": false, [0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [preflight : include_tasks] *******************************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [preflight : Check if inventory file variables are defined] ***********************************************************************
[1;35m [WARNING]: conditional statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{item}} is undefined[0m
[1;35mor {{item}} == ''[0m
[1;35m[0m
[0;36mskipping: [localhost] => (item=admin_password)  => {"ansible_loop_var": "item", "changed": false, "item": "admin_password", "skip_reason": "Conditional result was False"}[0m
[0;36mskipping: [localhost] => (item=secret_key)  => {"ansible_loop_var": "item", "changed": false, "item": "secret_key", "skip_reason": "Conditional result was False"}[0m
[0;36mskipping: [localhost] => (item=pg_username)  => {"ansible_loop_var": "item", "changed": false, "item": "pg_username", "skip_reason": "Conditional result was False"}[0m
[0;36mskipping: [localhost] => (item=pg_password)  => {"ansible_loop_var": "item", "changed": false, "item": "pg_password", "skip_reason": "Conditional result was False"}[0m
[0;36mskipping: [localhost] => (item=rabbitmq_password)  => {"ansible_loop_var": "item", "changed": false, "item": "rabbitmq_password", "skip_reason": "Conditional result was False"}[0m
[0;36mskipping: [localhost] => (item=rabbitmq_erlang_cookie)  => {"ansible_loop_var": "item", "changed": false, "item": "rabbitmq_erlang_cookie", "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : fail] ***************************************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : include_tasks] ******************************************************************************************************
[0;36mincluded: /Users/jlbuenosvinos/OneDrive/RedHat/Doc/OpenShift/GIT/ocp-microservices-ddd/doc/tower/ansible-tower-openshift-setup-3.4.3/roles/kubernetes/tasks/openshift_auth.yml for localhost[0m
[0;36mincluded: /Users/jlbuenosvinos/OneDrive/RedHat/Doc/OpenShift/GIT/ocp-microservices-ddd/doc/tower/ansible-tower-openshift-setup-3.4.3/roles/kubernetes/tasks/openshift.yml for localhost[0m

TASK [kubernetes : include_vars] *******************************************************************************************************
[0;32mok: [localhost] => {"ansible_facts": {"openshift_oc_bin": "oc --config={{ openshift_oc_config_file }}", "openshift_oc_config_file": "{{ kubernetes_base_path }}/.kube/config"}, "ansible_included_var_files": ["/Users/jlbuenosvinos/OneDrive/RedHat/Doc/OpenShift/GIT/ocp-microservices-ddd/doc/tower/ansible-tower-openshift-setup-3.4.3/roles/kubernetes/vars/openshift.yml"], "changed": false}[0m

TASK [kubernetes : Set kubernetes_namespace] *******************************************************************************************
[0;32mok: [localhost] => {"ansible_facts": {"kubernetes_namespace": "cicd-ocpadmin"}, "changed": false}[0m

TASK [kubernetes : Ensure workspace directories exist] *********************************************************************************
[0;32mok: [localhost] => (item=/tmp/ansible-tower-config) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "wheel", "item": "/tmp/ansible-tower-config", "mode": "0755", "owner": "jlbuenosvinos", "path": "/tmp/ansible-tower-config", "size": 102, "state": "directory", "uid": 501}[0m
[0;32mok: [localhost] => (item=/tmp/ansible-tower-config/.kube) => {"ansible_loop_var": "item", "changed": false, "gid": 0, "group": "wheel", "item": "/tmp/ansible-tower-config/.kube", "mode": "0755", "owner": "jlbuenosvinos", "path": "/tmp/ansible-tower-config/.kube", "size": 68, "state": "directory", "uid": 501}[0m

TASK [kubernetes : Authenticate with OpenShift via user and password] ******************************************************************
[0;33mchanged: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m

TASK [kubernetes : OpenShift authentication failed on TLS verification] ****************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : OpenShift authentication failed] ************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Authenticate with OpenShift via token] ******************************************************************************
[0;36mskipping: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m

TASK [kubernetes : OpenShift authentication failed] ************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Get Project Detail] *************************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config get project cicd-ocpadmin", "delta": "0:00:08.756718", "end": "2019-05-24 07:10:27.911190", "rc": 0, "start": "2019-05-24 07:10:19.154472", "stderr": "", "stderr_lines": [], "stdout": "NAME            DISPLAY NAME    STATUS\ncicd-ocpadmin   cicd-ocpadmin   Active", "stdout_lines": ["NAME            DISPLAY NAME    STATUS", "cicd-ocpadmin   cicd-ocpadmin   Active"]}[0m

TASK [kubernetes : Create AWX Openshift Project] ***************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Check PVC status] ***************************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": ["oc", "--config=/tmp/ansible-tower-config/.kube/config", "get", "pvc", "postgresql", "-n", "cicd-ocpadmin", "-o=jsonpath={.status.phase}"], "delta": "0:00:00.857661", "end": "2019-05-24 07:10:29.024672", "rc": 0, "start": "2019-05-24 07:10:28.167011", "stderr": "", "stderr_lines": [], "stdout": "Bound", "stdout_lines": ["Bound"]}[0m

TASK [kubernetes : Ensure PostgreSQL PVC is available] *********************************************************************************
[0;32mok: [localhost] => {[0m
[0;32m    "changed": false, [0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m

TASK [kubernetes : Set postgresql service name] ****************************************************************************************
[0;32mok: [localhost] => {"ansible_facts": {"postgresql_service_name": "postgresql"}, "changed": false}[0m

TASK [kubernetes : Add privileged SCC to service account] ******************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config adm policy add-scc-to-user privileged system:serviceaccount:cicd-ocpadmin:awx\n", "delta": "0:00:00.979633", "end": "2019-05-24 07:10:30.290156", "rc": 0, "start": "2019-05-24 07:10:29.310523", "stderr": "", "stderr_lines": [], "stdout": "scc \"privileged\" added to: [\"system:serviceaccount:cicd-ocpadmin:awx\"]", "stdout_lines": ["scc \"privileged\" added to: [\"system:serviceaccount:cicd-ocpadmin:awx\"]"]}[0m

TASK [kubernetes : include_tasks] ******************************************************************************************************
[0;36mskipping: [localhost] => (item=kubernetes_auth.yml)  => {"ansible_loop_var": "tasks", "changed": false, "skip_reason": "Conditional result was False", "tasks": "kubernetes_auth.yml"}[0m
[0;36mskipping: [localhost] => (item=kubernetes.yml)  => {"ansible_loop_var": "tasks", "changed": false, "skip_reason": "Conditional result was False", "tasks": "kubernetes.yml"}[0m

TASK [kubernetes : Use kubectl or oc] **************************************************************************************************
[0;32mok: [localhost] => {"ansible_facts": {"kubectl_or_oc": "oc --config=/tmp/ansible-tower-config/.kube/config"}, "changed": false}[0m

TASK [kubernetes : set_fact] ***********************************************************************************************************
[0;32mok: [localhost] => {"ansible_facts": {"deployment_object": "sts"}, "changed": false}[0m

TASK [kubernetes : Record deployment size] *********************************************************************************************
[0;31mfatal: [localhost]: FAILED! => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config get sts  ansible-tower  -n cicd-ocpadmin -o=jsonpath='{.status.replicas}'\n", "delta": "0:00:00.960744", "end": "2019-05-24 07:10:31.599014", "msg": "non-zero return code", "rc": 1, "start": "2019-05-24 07:10:30.638270", "stderr": "Error from server (NotFound): statefulsets.apps \"ansible-tower\" not found", "stderr_lines": ["Error from server (NotFound): statefulsets.apps \"ansible-tower\" not found"], "stdout": "", "stdout_lines": []}[0m
[0;36m...ignoring[0m

TASK [kubernetes : Set expected post-deployment Replicas value] ************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Delete existing Deployment] *****************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Get Postgres Service Detail] ****************************************************************************************
[0;31mfatal: [localhost]: FAILED! => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config describe svc postgresql -n cicd-ocpadmin", "delta": "0:00:01.145272", "end": "2019-05-24 07:10:33.027877", "msg": "non-zero return code", "rc": 1, "start": "2019-05-24 07:10:31.882605", "stderr": "Error from server (NotFound): services \"postgresql\" not found", "stderr_lines": ["Error from server (NotFound): services \"postgresql\" not found"], "stdout": "", "stdout_lines": []}[0m
[0;36m...ignoring[0m

TASK [kubernetes : Template PostgreSQL Deployment] *************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "checksum": "ff1ea920835e7d27d9f834603ec8485d71e3fa94", "dest": "/tmp/ansible-tower-config/postgresql-persistent.yml", "gid": 20, "group": "staff", "md5sum": "d9d987109ad10c0c1538816e96b8256b", "mode": "0600", "owner": "jlbuenosvinos", "size": 6405, "src": "/Users/jlbuenosvinos/.ansible/tmp/ansible-tmp-1558674633.14-192795489731924/source", "state": "file", "uid": 501}[0m

TASK [kubernetes : Deploy and Activate Postgres] ***************************************************************************************
[0;33mchanged: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m

TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] **************************************************************************
[0;36mskipping: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m

TASK [kubernetes : Set postgresql hostname to helm package service] ********************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Wait for Postgres to activate] **************************************************************************************
Pausing for 60 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
[0;32mok: [localhost] => {"changed": false, "delta": 60, "echo": true, "rc": 0, "start": "2019-05-24 07:10:35.694754", "stderr": "", "stdout": "Paused for 60.0 seconds", "stop": "2019-05-24 07:11:35.697531", "user_input": ""}[0m

TASK [kubernetes : Set task image name] ************************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Set web image name] *************************************************************************************************
[0;36mskipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False"}[0m

TASK [kubernetes : Render deployment templates] ****************************************************************************************
[0;32mok: [localhost] => (item=None) => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m
[0;32mok: [localhost] => (item=None) => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m
[0;32mok: [localhost] => (item=None) => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m
[0;32mok: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m

TASK [kubernetes : Apply Deployment] ***************************************************************************************************
[0;33mchanged: [localhost] => (item=None) => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m
[0;33mchanged: [localhost] => (item=None) => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m
[0;33mchanged: [localhost] => (item=None) => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m
[0;33mchanged: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m

TASK [kubernetes : Delete any existing management pod] *********************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin  delete pod ansible-tower-management --grace-period=0 --ignore-not-found\n", "delta": "0:00:00.863001", "end": "2019-05-24 07:11:46.220958", "rc": 0, "start": "2019-05-24 07:11:45.357957", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [kubernetes : Template management pod] ********************************************************************************************
[0;32mok: [localhost] => {"ansible_facts": {"management_pod": "---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: ansible-tower-management\n  namespace: cicd-ocpadmin\nspec:\n  containers:\n    - name: ansible-tower-management\n      image: \"registry.access.redhat.com/ansible-tower-34/ansible-tower:3.4.3\"\n      command: [\"sleep\", \"infinity\"]\n      volumeMounts:\n        - name: ansible-tower-application-config\n          mountPath: \"/etc/tower\"\n          readOnly: true\n\n        - name: \"ansible-tower-application-credentials\"\n          mountPath: \"/etc/tower/conf.d/\"\n          readOnly: true\n  volumes:\n    - name: ansible-tower-application-config\n      configMap:\n        name: ansible-tower-config\n        items:\n          - key: ansible-tower_settings\n            path: settings.py\n          - key: secret_key\n            path: SECRET_KEY\n\n    - name: \"ansible-tower-application-credentials\"\n      secret:\n        secretName: \"ansible-tower-secrets\"\n        items:\n          - key: credentials_py\n            path: 'credentials.py'\n\n  restartPolicy: Never\n"}, "changed": false}[0m

TASK [kubernetes : Create management pod] **********************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "echo '---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: ansible-tower-management\n  namespace: cicd-ocpadmin\nspec:\n  containers:\n    - name: ansible-tower-management\n      image: \"registry.access.redhat.com/ansible-tower-34/ansible-tower:3.4.3\"\n      command: [\"sleep\", \"infinity\"]\n      volumeMounts:\n        - name: ansible-tower-application-config\n          mountPath: \"/etc/tower\"\n          readOnly: true\n\n        - name: \"ansible-tower-application-credentials\"\n          mountPath: \"/etc/tower/conf.d/\"\n          readOnly: true\n  volumes:\n    - name: ansible-tower-application-config\n      configMap:\n        name: ansible-tower-config\n        items:\n          - key: ansible-tower_settings\n            path: settings.py\n          - key: secret_key\n            path: SECRET_KEY\n\n    - name: \"ansible-tower-application-credentials\"\n      secret:\n        secretName: \"ansible-tower-secrets\"\n        items:\n          - key: credentials_py\n            path: '\"'\"'credentials.py'\"'\"'\n\n  restartPolicy: Never\n' | oc --config=/tmp/ansible-tower-config/.kube/config apply -f -\n", "delta": "0:00:01.779545", "end": "2019-05-24 07:11:48.257142", "rc": 0, "start": "2019-05-24 07:11:46.477597", "stderr": "", "stderr_lines": [], "stdout": "pod \"ansible-tower-management\" created", "stdout_lines": ["pod \"ansible-tower-management\" created"]}[0m

TASK [kubernetes : Wait for management pod to start] ***********************************************************************************
[1;30mFAILED - RETRYING: Wait for management pod to start (60 retries left).[0m
[1;30mFAILED - RETRYING: Wait for management pod to start (59 retries left).[0m
[1;30mFAILED - RETRYING: Wait for management pod to start (58 retries left).[0m
[0;33mchanged: [localhost] => {"attempts": 4, "changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin  get pod ansible-tower-management -o jsonpath=\"{.status.phase}\"\n", "delta": "0:00:00.820546", "end": "2019-05-24 07:12:27.534128", "rc": 0, "start": "2019-05-24 07:12:26.713582", "stderr": "", "stderr_lines": [], "stdout": "Running", "stdout_lines": ["Running"]}[0m

TASK [kubernetes : Migrate database] ***************************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin exec ansible-tower-management --  bash -c \"awx-manage migrate --noinput\"\n", "delta": "0:04:29.483063", "end": "2019-05-24 07:16:57.237895", "rc": 0, "start": "2019-05-24 07:12:27.754832", "stderr": "2019-05-24 05:14:59,226 DEBUG    awx.main.migrations Removing all Rackspace InventorySource from database.\n2019-05-24 05:14:59,557 DEBUG    awx.main.migrations Removing all Azure Credentials from database.\n2019-05-24 05:14:59,943 DEBUG    awx.main.migrations Removing all Azure InventorySource from database.\n2019-05-24 05:15:00,328 DEBUG    awx.main.migrations Removing all InventorySource that have no link to an Inventory from database.\n2019-05-24 05:15:01,841 DEBUG    awx.main.models.credential adding Machine credential type\n2019-05-24 05:15:01,845 DEBUG    awx.main.models.credential adding Source Control credential type\n2019-05-24 05:15:01,847 DEBUG    awx.main.models.credential adding Vault credential type\n2019-05-24 05:15:01,849 DEBUG    awx.main.models.credential adding Network credential type\n2019-05-24 05:15:01,851 DEBUG    awx.main.models.credential adding Amazon Web Services credential type\n2019-05-24 05:15:01,853 DEBUG    awx.main.models.credential adding OpenStack credential type\n2019-05-24 05:15:01,855 DEBUG    awx.main.models.credential adding VMware vCenter credential type\n2019-05-24 05:15:01,857 DEBUG    awx.main.models.credential adding Red Hat Satellite 6 credential type\n2019-05-24 05:15:01,859 DEBUG    awx.main.models.credential adding Red Hat CloudForms credential type\n2019-05-24 05:15:01,861 DEBUG    awx.main.models.credential adding Google Compute Engine credential type\n2019-05-24 05:15:01,863 DEBUG    awx.main.models.credential adding Microsoft Azure Resource Manager credential type\n2019-05-24 05:15:01,865 DEBUG    awx.main.models.credential adding Insights credential type\n2019-05-24 05:15:01,867 DEBUG    awx.main.models.credential adding Red Hat Virtualization credential type\n2019-05-24 05:15:01,915 DEBUG    awx.main.models.credential adding Ansible Tower credential type\n2019-05-24 05:16:07,854 INFO     rbac_migrations Computing role roots..\n2019-05-24 05:16:07,863 INFO     rbac_migrations Found 0 roots in 0.000172 seconds, rebuilding ancestry map\n2019-05-24 05:16:07,863 INFO     rbac_migrations Rebuild completed in 0.000005 seconds\n2019-05-24 05:16:07,863 INFO     rbac_migrations Done.\n2019-05-24 05:16:14,424 INFO     rbac_migrations Computing role roots..\n2019-05-24 05:16:14,425 INFO     rbac_migrations Found 0 roots in 0.000163 seconds, rebuilding ancestry map\n2019-05-24 05:16:14,425 INFO     rbac_migrations Rebuild completed in 0.000006 seconds\n2019-05-24 05:16:14,425 INFO     rbac_migrations Done.", "stderr_lines": ["2019-05-24 05:14:59,226 DEBUG    awx.main.migrations Removing all Rackspace InventorySource from database.", "2019-05-24 05:14:59,557 DEBUG    awx.main.migrations Removing all Azure Credentials from database.", "2019-05-24 05:14:59,943 DEBUG    awx.main.migrations Removing all Azure InventorySource from database.", "2019-05-24 05:15:00,328 DEBUG    awx.main.migrations Removing all InventorySource that have no link to an Inventory from database.", "2019-05-24 05:15:01,841 DEBUG    awx.main.models.credential adding Machine credential type", "2019-05-24 05:15:01,845 DEBUG    awx.main.models.credential adding Source Control credential type", "2019-05-24 05:15:01,847 DEBUG    awx.main.models.credential adding Vault credential type", "2019-05-24 05:15:01,849 DEBUG    awx.main.models.credential adding Network credential type", "2019-05-24 05:15:01,851 DEBUG    awx.main.models.credential adding Amazon Web Services credential type", "2019-05-24 05:15:01,853 DEBUG    awx.main.models.credential adding OpenStack credential type", "2019-05-24 05:15:01,855 DEBUG    awx.main.models.credential adding VMware vCenter credential type", "2019-05-24 05:15:01,857 DEBUG    awx.main.models.credential adding Red Hat Satellite 6 credential type", "2019-05-24 05:15:01,859 DEBUG    awx.main.models.credential adding Red Hat CloudForms credential type", "2019-05-24 05:15:01,861 DEBUG    awx.main.models.credential adding Google Compute Engine credential type", "2019-05-24 05:15:01,863 DEBUG    awx.main.models.credential adding Microsoft Azure Resource Manager credential type", "2019-05-24 05:15:01,865 DEBUG    awx.main.models.credential adding Insights credential type", "2019-05-24 05:15:01,867 DEBUG    awx.main.models.credential adding Red Hat Virtualization credential type", "2019-05-24 05:15:01,915 DEBUG    awx.main.models.credential adding Ansible Tower credential type", "2019-05-24 05:16:07,854 INFO     rbac_migrations Computing role roots..", "2019-05-24 05:16:07,863 INFO     rbac_migrations Found 0 roots in 0.000172 seconds, rebuilding ancestry map", "2019-05-24 05:16:07,863 INFO     rbac_migrations Rebuild completed in 0.000005 seconds", "2019-05-24 05:16:07,863 INFO     rbac_migrations Done.", "2019-05-24 05:16:14,424 INFO     rbac_migrations Computing role roots..", "2019-05-24 05:16:14,425 INFO     rbac_migrations Found 0 roots in 0.000163 seconds, rebuilding ancestry map", "2019-05-24 05:16:14,425 INFO     rbac_migrations Rebuild completed in 0.000006 seconds", "2019-05-24 05:16:14,425 INFO     rbac_migrations Done."], "stdout": "Operations to perform:\n  Apply all migrations: auth, conf, contenttypes, main, oauth2_provider, sessions, sites, social_django, sso, taggit\nRunning migrations:\n  Applying contenttypes.0001_initial... OK\n  Applying taggit.0001_initial... OK\n  Applying taggit.0002_auto_20150616_2121... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0001_initial... OK\n  Applying main.0001_initial... OK\n  Applying main.0002_squashed_v300_release... OK\n  Applying main.0003_squashed_v300_v303_updates... OK\n  Applying main.0004_squashed_v310_release... OK\n  Applying conf.0001_initial... OK\n  Applying conf.0002_v310_copy_tower_settings... OK\n  Applying main.0005_squashed_v310_v313_updates... OK\n  Applying main.0006_v320_release... OK\n  Applying main.0007_v320_data_migrations... OK\n  Applying main.0008_v320_drop_v1_credential_fields... OK\n  Applying main.0009_v322_add_setting_field_for_activity_stream... OK\n  Applying main.0010_v322_add_ovirt4_tower_inventory... OK\n  Applying main.0011_v322_encrypt_survey_passwords... OK\n  Applying main.0012_v322_update_cred_types... OK\n  Applying main.0013_v330_multi_credential... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying auth.0007_alter_validators_add_error_messages... OK\n  Applying auth.0008_alter_user_username_max_length... OK\n  Applying conf.0003_v310_JSONField_changes... OK\n  Applying conf.0004_v320_reencrypt... OK\n  Applying conf.0005_v330_rename_two_session_settings... OK\n  Applying conf.0006_v331_ldap_group_type... OK\n  Applying sessions.0001_initial... OK\n  Applying main.0014_v330_saved_launchtime_configs... OK\n  Applying main.0015_v330_blank_start_args... OK\n  Applying main.0016_v330_non_blank_workflow... OK\n  Applying main.0017_v330_move_deprecated_stdout... OK\n  Applying main.0018_v330_add_additional_stdout_events... OK\n  Applying main.0019_v330_custom_virtualenv... OK\n  Applying main.0020_v330_instancegroup_policies... OK\n  Applying main.0021_v330_declare_new_rbac_roles... OK\n  Applying main.0022_v330_create_new_rbac_roles... OK\n  Applying main.0023_v330_inventory_multicred... OK\n  Applying main.0024_v330_create_user_session_membership... OK\n  Applying main.0025_v330_add_oauth_activity_stream_registrar... OK\n  Applying oauth2_provider.0001_initial... OK\n  Applying main.0026_v330_delete_authtoken... OK\n  Applying main.0027_v330_emitted_events... OK\n  Applying main.0028_v330_add_tower_verify... OK\n  Applying main.0030_v330_modify_application... OK\n  Applying main.0031_v330_encrypt_oauth2_secret... OK\n  Applying main.0032_v330_polymorphic_delete... OK\n  Applying main.0033_v330_oauth_help_text... OK\n  Applying main.0034_v330_delete_user_role... OK\n  Applying main.0035_v330_more_oauth2_help_text... OK\n  Applying main.0036_v330_credtype_remove_become_methods... OK\n  Applying main.0037_v330_remove_legacy_fact_cleanup... OK\n  Applying main.0038_v330_add_deleted_activitystream_actor... OK\n  Applying main.0039_v330_custom_venv_help_text... OK\n  Applying main.0040_v330_unifiedjob_controller_node... OK\n  Applying main.0041_v330_update_oauth_refreshtoken... OK\n  Applying main.0042_v330_org_member_role_deparent... OK\n  Applying main.0043_v330_oauth2accesstoken_modified... OK\n  Applying main.0044_v330_add_inventory_update_inventory... OK\n  Applying main.0045_v330_instance_managed_by_policy... OK\n  Applying main.0046_v330_remove_client_credentials_grant... OK\n  Applying main.0047_v330_activitystream_instance... OK\n  Applying main.0048_v330_django_created_modified_by_model_name... OK\n  Applying main.0049_v330_validate_instance_capacity_adjustment... OK\n  Applying main.0050_v340_drop_celery_tables... OK\n  Applying main.0051_v340_job_slicing... OK\n  Applying main.0052_v340_remove_project_scm_delete_on_next_update... OK\n  Applying main.0053_v340_workflow_inventory... OK\n  Applying main.0054_v340_workflow_convergence... OK\n  Applying oauth2_provider.0002_08_updates... OK\n  Applying oauth2_provider.0003_auto_20160316_1503... OK\n  Applying oauth2_provider.0004_auto_20160525_1623... OK\n  Applying oauth2_provider.0005_auto_20170514_1141... OK\n  Applying oauth2_provider.0006_auto_20171214_2232... OK\n  Applying sites.0001_initial... OK\n  Applying sites.0002_alter_domain_unique... OK\n  Applying social_django.0001_initial... OK\n  Applying social_django.0002_add_related_name... OK\n  Applying social_django.0003_alter_email_max_length... OK\n  Applying social_django.0004_auto_20160423_0400... OK\n  Applying social_django.0005_auto_20160727_2333... OK\n  Applying social_django.0006_partial... OK\n  Applying social_django.0007_code_timestamp... OK\n  Applying social_django.0008_partial_timestamp... OK\n  Applying sso.0001_initial... OK\n  Applying sso.0002_expand_provider_options... OK", "stdout_lines": ["Operations to perform:", "  Apply all migrations: auth, conf, contenttypes, main, oauth2_provider, sessions, sites, social_django, sso, taggit", "Running migrations:", "  Applying contenttypes.0001_initial... OK", "  Applying taggit.0001_initial... OK", "  Applying taggit.0002_auto_20150616_2121... OK", "  Applying contenttypes.0002_remove_content_type_name... OK", "  Applying auth.0001_initial... OK", "  Applying main.0001_initial... OK", "  Applying main.0002_squashed_v300_release... OK", "  Applying main.0003_squashed_v300_v303_updates... OK", "  Applying main.0004_squashed_v310_release... OK", "  Applying conf.0001_initial... OK", "  Applying conf.0002_v310_copy_tower_settings... OK", "  Applying main.0005_squashed_v310_v313_updates... OK", "  Applying main.0006_v320_release... OK", "  Applying main.0007_v320_data_migrations... OK", "  Applying main.0008_v320_drop_v1_credential_fields... OK", "  Applying main.0009_v322_add_setting_field_for_activity_stream... OK", "  Applying main.0010_v322_add_ovirt4_tower_inventory... OK", "  Applying main.0011_v322_encrypt_survey_passwords... OK", "  Applying main.0012_v322_update_cred_types... OK", "  Applying main.0013_v330_multi_credential... OK", "  Applying auth.0002_alter_permission_name_max_length... OK", "  Applying auth.0003_alter_user_email_max_length... OK", "  Applying auth.0004_alter_user_username_opts... OK", "  Applying auth.0005_alter_user_last_login_null... OK", "  Applying auth.0006_require_contenttypes_0002... OK", "  Applying auth.0007_alter_validators_add_error_messages... OK", "  Applying auth.0008_alter_user_username_max_length... OK", "  Applying conf.0003_v310_JSONField_changes... OK", "  Applying conf.0004_v320_reencrypt... OK", "  Applying conf.0005_v330_rename_two_session_settings... OK", "  Applying conf.0006_v331_ldap_group_type... OK", "  Applying sessions.0001_initial... OK", "  Applying main.0014_v330_saved_launchtime_configs... OK", "  Applying main.0015_v330_blank_start_args... OK", "  Applying main.0016_v330_non_blank_workflow... OK", "  Applying main.0017_v330_move_deprecated_stdout... OK", "  Applying main.0018_v330_add_additional_stdout_events... OK", "  Applying main.0019_v330_custom_virtualenv... OK", "  Applying main.0020_v330_instancegroup_policies... OK", "  Applying main.0021_v330_declare_new_rbac_roles... OK", "  Applying main.0022_v330_create_new_rbac_roles... OK", "  Applying main.0023_v330_inventory_multicred... OK", "  Applying main.0024_v330_create_user_session_membership... OK", "  Applying main.0025_v330_add_oauth_activity_stream_registrar... OK", "  Applying oauth2_provider.0001_initial... OK", "  Applying main.0026_v330_delete_authtoken... OK", "  Applying main.0027_v330_emitted_events... OK", "  Applying main.0028_v330_add_tower_verify... OK", "  Applying main.0030_v330_modify_application... OK", "  Applying main.0031_v330_encrypt_oauth2_secret... OK", "  Applying main.0032_v330_polymorphic_delete... OK", "  Applying main.0033_v330_oauth_help_text... OK", "  Applying main.0034_v330_delete_user_role... OK", "  Applying main.0035_v330_more_oauth2_help_text... OK", "  Applying main.0036_v330_credtype_remove_become_methods... OK", "  Applying main.0037_v330_remove_legacy_fact_cleanup... OK", "  Applying main.0038_v330_add_deleted_activitystream_actor... OK", "  Applying main.0039_v330_custom_venv_help_text... OK", "  Applying main.0040_v330_unifiedjob_controller_node... OK", "  Applying main.0041_v330_update_oauth_refreshtoken... OK", "  Applying main.0042_v330_org_member_role_deparent... OK", "  Applying main.0043_v330_oauth2accesstoken_modified... OK", "  Applying main.0044_v330_add_inventory_update_inventory... OK", "  Applying main.0045_v330_instance_managed_by_policy... OK", "  Applying main.0046_v330_remove_client_credentials_grant... OK", "  Applying main.0047_v330_activitystream_instance... OK", "  Applying main.0048_v330_django_created_modified_by_model_name... OK", "  Applying main.0049_v330_validate_instance_capacity_adjustment... OK", "  Applying main.0050_v340_drop_celery_tables... OK", "  Applying main.0051_v340_job_slicing... OK", "  Applying main.0052_v340_remove_project_scm_delete_on_next_update... OK", "  Applying main.0053_v340_workflow_inventory... OK", "  Applying main.0054_v340_workflow_convergence... OK", "  Applying oauth2_provider.0002_08_updates... OK", "  Applying oauth2_provider.0003_auto_20160316_1503... OK", "  Applying oauth2_provider.0004_auto_20160525_1623... OK", "  Applying oauth2_provider.0005_auto_20170514_1141... OK", "  Applying oauth2_provider.0006_auto_20171214_2232... OK", "  Applying sites.0001_initial... OK", "  Applying sites.0002_alter_domain_unique... OK", "  Applying social_django.0001_initial... OK", "  Applying social_django.0002_add_related_name... OK", "  Applying social_django.0003_alter_email_max_length... OK", "  Applying social_django.0004_auto_20160423_0400... OK", "  Applying social_django.0005_auto_20160727_2333... OK", "  Applying social_django.0006_partial... OK", "  Applying social_django.0007_code_timestamp... OK", "  Applying social_django.0008_partial_timestamp... OK", "  Applying sso.0001_initial... OK", "  Applying sso.0002_expand_provider_options... OK"]}[0m

TASK [kubernetes : Check for Tower Super users] ****************************************************************************************
[0;31mfatal: [localhost]: FAILED! => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin exec ansible-tower-management --  bash -c \"echo 'from django.contrib.auth.models import User; nsu = User.objects.filter(is_superuser=True).count(); exit(0 if nsu > 0 else 1)' | awx-manage shell\"\n", "delta": "0:00:10.433492", "end": "2019-05-24 07:17:07.887968", "msg": "non-zero return code", "rc": 1, "start": "2019-05-24 07:16:57.454476", "stderr": "command terminated with exit code 1", "stderr_lines": ["command terminated with exit code 1"], "stdout": "", "stdout_lines": []}[0m
[0;36m...ignoring[0m

TASK [kubernetes : create django super user if it does not exist] **********************************************************************
[0;33mchanged: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}[0m

TASK [kubernetes : update django super user password] **********************************************************************************
[0;32mok: [localhost] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}[0m

TASK [kubernetes : Create the default organization if it is needed.] *******************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin exec ansible-tower-management --  bash -c \"awx-manage create_preload_data\"\n", "delta": "0:00:09.615068", "end": "2019-05-24 07:17:31.237966", "rc": 0, "start": "2019-05-24 07:17:21.622898", "stderr": "", "stderr_lines": [], "stdout": "Default organization added.\nDemo Credential, Inventory, and Job Template added.\n(changed: True)", "stdout_lines": ["Default organization added.", "Demo Credential, Inventory, and Job Template added.", "(changed: True)"]}[0m

TASK [kubernetes : Delete management pod] **********************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin  delete pod ansible-tower-management --grace-period=0 --ignore-not-found\n", "delta": "0:00:05.554784", "end": "2019-05-24 07:17:37.022337", "rc": 0, "start": "2019-05-24 07:17:31.467553", "stderr": "", "stderr_lines": [], "stdout": "pod \"ansible-tower-management\" deleted", "stdout_lines": ["pod \"ansible-tower-management\" deleted"]}[0m

TASK [kubernetes : Scale up deployment] ************************************************************************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": "oc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin  scale sts ansible-tower --replicas=0\noc --config=/tmp/ansible-tower-config/.kube/config -n cicd-ocpadmin  scale sts ansible-tower --replicas=1\n", "delta": "0:00:02.804616", "end": "2019-05-24 07:17:40.050742", "rc": 0, "start": "2019-05-24 07:17:37.246126", "stderr": "", "stderr_lines": [], "stdout": "statefulset.apps \"ansible-tower\" scaled\nstatefulset.apps \"ansible-tower\" scaled", "stdout_lines": ["statefulset.apps \"ansible-tower\" scaled", "statefulset.apps \"ansible-tower\" scaled"]}[0m

PLAY RECAP *****************************************************************************************************************************
[0;33mlocalhost[0m                  : [0;32mok=37  [0m [0;33mchanged=19  [0m unreachable=0    failed=0    [0;36mskipped=15  [0m rescued=0    [1;35mignored=3   [0m

